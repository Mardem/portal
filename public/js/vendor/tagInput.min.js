$.fn.tagInput=function(a){return this.each(function(){var f=$.extend({},{labelClass:"label label-success"},a);var k=$(this);var g=$(this).children("input[type=hidden]");var e=$(this).children("input[type=text]");h();var b=g.val().split(",");if(g.val()!=""){for(i=0;i<b.length;i++){c(b[i])}}e.keydown(function(l){var m=$(this).val();if(l.keyCode==8){if(m.length==0){j(-1)}}else{if(l.keyCode==13){d();l.preventDefault();return false}}});e.keyup(function(l){var m=$(this).val();if(l.keyCode==27){e.val("");e.blur()}else{if(l.keyCode==13){d();l.preventDefault();return false}}if(m.indexOf(",")>=0){d()}});e.change(function(){d()});function d(){str=e.val();if(/\S/.test(str)){str=str.replace(",","");str=str.trim();e.val("");c(str);var l=e.next();l.val(l.val()+","+str);h()}}function j(l){if(l>0){label=k.children("span.tagLabel[data-badge="+l+"]")}else{label=k.children("span.tagLabel").last()}g.val(g.val().replace((label.text().slice(0,-2)),""));h();label.remove()}function c(l){if(k.children("span.tagLabel").length>0){badge=e.prev();var m=badge.data("badge")+1;label=$('<span class="'+f.labelClass+' tagLabel" data-badge="'+m+'">'+l+' <a href="#" data-badge="'+m+'" aria-label="close" class="closelabel">&times;</a></span> ').insertAfter(badge)}else{label=$('<span class="'+f.labelClass+' tagLabel" data-badge="1">'+l+' <a href="#" data-badge="1" aria-label="close" class="closelabel">&times;</a></span> ').insertBefore(e)}label.children(".closelabel").click(function(){j($(this).data("badge"))})}function h(){s=g.val();s=s.replace(/^( *, *)+|(, *(?=,|$))+/g,"");g.val(s)}})};