!function(a){a.fn.extend({slimScroll:function(b){var d={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},c=a.extend(d,b);return this.each(function(){function K(g){if(O){var g=g||window.event,f=0;g.wheelDelta&&(f=-g.wheelDelta/120),g.detail&&(f=g.detail/3);var h=g.target||g.srcTarget||g.srcElement;a(h).closest("."+c.wrapperClass).is(k.parent())&&I(f,!0),g.preventDefault&&!j&&g.preventDefault(),j||(g.returnValue=!1)}}function I(m,h,g){j=!1;var n=m,l=k.outerHeight()-i.outerHeight();if(h&&(n=parseInt(i.css("top"))+m*parseInt(c.wheelStep)/100*i.outerHeight(),n=Math.min(Math.max(n,0),l),n=m>0?Math.ceil(n):Math.floor(n),i.css({top:n+"px"})),z=parseInt(i.css("top"))/(k.outerHeight()-i.outerHeight()),n=z*(k[0].scrollHeight-k.outerHeight()),g){n=m;var f=n/k[0].scrollHeight*k.outerHeight();f=Math.min(Math.max(f,0),l),i.css({top:f+"px"})}k.scrollTop(n),k.trigger("slimscrolling",~~n),L(),U()}function W(f){window.addEventListener?(f.addEventListener("DOMMouseScroll",K,!1),f.addEventListener("mousewheel",K,!1)):document.attachEvent("onmousewheel",K)}function N(){Q=Math.max(k.outerHeight()/k[0].scrollHeight*k.outerHeight(),M),i.css({height:Q+"px"});var f=Q==k.outerHeight()?"none":"block";i.css({display:f})}function L(){if(N(),clearTimeout(J),z==~~z){if(j=c.allowPageScroll,V!=z){var f=0==~~z?"top":"bottom";k.trigger("slimscroll",f)}}else{j=!1}return V=z,Q>=k.outerHeight()?void (j=!0):(i.stop(!0,!0).fadeIn("fast"),void (c.railVisible&&B.stop(!0,!0).fadeIn("fast")))}function U(){c.alwaysVisible||(J=setTimeout(function(){c.disableFadeOut&&O||A||T||(i.fadeOut("slow"),B.fadeOut("slow"))},1000))}var O,A,T,J,P,Q,z,V,s="<div></div>",M=30,j=!1,k=a(this);if(k.parent().hasClass(c.wrapperClass)){var G=k.scrollTop();if(i=k.closest("."+c.barClass),B=k.closest("."+c.railClass),N(),a.isPlainObject(b)){if("height" in b&&"auto"==b.height){k.parent().css("height","auto"),k.css("height","auto");var q=k.parent().parent().height();k.parent().css("height",q),k.css("height",q)}if("scrollTo" in b){G=parseInt(c.scrollTo)}else{if("scrollBy" in b){G+=parseInt(c.scrollBy)}else{if("destroy" in b){return i.remove(),B.remove(),void k.unwrap()}}}I(G,!1,!0)}}else{if(!(a.isPlainObject(b)&&"destroy" in b)){c.height="auto"==c.height?k.parent().height():c.height;var e=a(s).addClass(c.wrapperClass).css({position:"relative",overflow:"hidden",width:c.width,height:c.height});k.css({overflow:"hidden",width:c.width,height:c.height});var B=a(s).addClass(c.railClass).css({width:c.size,height:"100%",position:"absolute",top:0,display:c.alwaysVisible&&c.railVisible?"block":"none","border-radius":c.railBorderRadius,background:c.railColor,opacity:c.railOpacity,zIndex:90}),i=a(s).addClass(c.barClass).css({background:c.color,width:c.size,position:"absolute",top:0,opacity:c.opacity,display:c.alwaysVisible?"block":"none","border-radius":c.borderRadius,BorderRadius:c.borderRadius,MozBorderRadius:c.borderRadius,WebkitBorderRadius:c.borderRadius,zIndex:99}),F="right"==c.position?{right:c.distance}:{left:c.distance};B.css(F),i.css(F),k.wrap(e),k.parent().append(i),k.parent().append(B),c.railDraggable&&i.bind("mousedown",function(f){var g=a(document);return T=!0,t=parseFloat(i.css("top")),pageY=f.pageY,g.bind("mousemove.slimscroll",function(h){currTop=t+h.pageY-pageY,i.css("top",currTop),I(0,i.position().top,!1)}),g.bind("mouseup.slimscroll",function(h){T=!1,U(),g.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(f){return f.stopPropagation(),f.preventDefault(),!1}),B.hover(function(){L()},function(){U()}),i.hover(function(){A=!0},function(){A=!1}),k.hover(function(){O=!0,L(),U()},function(){O=!1,U()}),k.bind("touchstart",function(g,f){g.originalEvent.touches.length&&(P=g.originalEvent.touches[0].pageY)}),k.bind("touchmove",function(g){if(j||g.originalEvent.preventDefault(),g.originalEvent.touches.length){var f=(P-g.originalEvent.touches[0].pageY)/c.touchScrollStep;I(f,!0),P=g.originalEvent.touches[0].pageY}}),N(),"bottom"===c.start?(i.css({top:k.outerHeight()-i.outerHeight()}),I(0,!0)):"top"!==c.start&&(I(a(c.start).position().top,null,!0),c.alwaysVisible||i.hide()),W(this)}}}),this}}),a.fn.extend({slimscroll:a.fn.slimScroll})}(jQuery);