(function(b,c,d){var a=b.Field;function e(f){a.call(this,f);this._configInitialized=false}e.prototype=new a({css:"jsgrid-control-field",align:"center",width:50,filtering:false,inserting:false,editing:false,sorting:false,buttonClass:"jsgrid-button",modeButtonClass:"jsgrid-mode-button",modeOnButtonClass:"jsgrid-mode-on-button",searchModeButtonClass:"jsgrid-search-mode-button ti-search",insertModeButtonClass:"jsgrid-insert-mode-button ti-plus",editButtonClass:"jsgrid-edit-button ti-pencil",deleteButtonClass:"jsgrid-delete-button ti-trash",searchButtonClass:"jsgrid-search-button ti-search",clearFilterButtonClass:"jsgrid-clear-filter-button",insertButtonClass:"jsgrid-insert-button",updateButtonClass:"jsgrid-update-button ti-check",cancelEditButtonClass:"jsgrid-cancel-edit-button ti-close",searchModeButtonTooltip:"Switch to searching",insertModeButtonTooltip:"Switch to inserting",editButtonTooltip:"Edit",deleteButtonTooltip:"Delete",searchButtonTooltip:"Search",clearFilterButtonTooltip:"Clear filter",insertButtonTooltip:"Insert",updateButtonTooltip:"Update",cancelEditButtonTooltip:"Cancel edit",editButton:true,deleteButton:true,clearFilterButton:true,modeSwitchButton:true,_initConfig:function(){this._hasFiltering=this._grid.filtering;this._hasInserting=this._grid.inserting;if(this._hasInserting&&this.modeSwitchButton){this._grid.inserting=false}this._configInitialized=true},headerTemplate:function(){if(!this._configInitialized){this._initConfig()}var g=this._hasFiltering;var f=this._hasInserting;if(!this.modeSwitchButton||(!g&&!f)){return""}if(g&&!f){return this._createFilterSwitchButton()}if(f&&!g){return this._createInsertSwitchButton()}return this._createModeSwitchButton()},itemTemplate:function(h,g){var f=c([]);if(this.editButton){f=f.add(this._createEditButton(g))}if(this.deleteButton){f=f.add(this._createDeleteButton(g))}return f},filterTemplate:function(){var f=this._createSearchButton();return this.clearFilterButton?f.add(this._createClearFilterButton()):f},insertTemplate:function(){return this._createInsertButton()},editTemplate:function(){return this._createUpdateButton().add(this._createCancelEditButton())},_createFilterSwitchButton:function(){return this._createOnOffSwitchButton("filtering",this.searchModeButtonClass,true)},_createInsertSwitchButton:function(){return this._createOnOffSwitchButton("inserting",this.insertModeButtonClass,false)},_createOnOffSwitchButton:function(g,f,k){var j=k;var i=c.proxy(function(){h.toggleClass(this.modeOnButtonClass,j)},this);var h=this._createGridButton(this.modeButtonClass+" "+f,"",function(l){j=!j;l.option(g,j);i()});i();return h},_createModeSwitchButton:function(){var f=false;var h=c.proxy(function(){g.attr("title",f?this.searchModeButtonTooltip:this.insertModeButtonTooltip).toggleClass(this.insertModeButtonClass,!f).toggleClass(this.searchModeButtonClass,f)},this);var g=this._createGridButton(this.modeButtonClass,"",function(i){f=!f;i.option("inserting",f);i.option("filtering",!f);h()});h();return g},_createEditButton:function(f){return this._createGridButton(this.editButtonClass,this.editButtonTooltip,function(g,h){g.editItem(f);h.stopPropagation()})},_createDeleteButton:function(f){return this._createGridButton(this.deleteButtonClass,this.deleteButtonTooltip,function(g,h){g.deleteItem(f);h.stopPropagation()})},_createSearchButton:function(){return this._createGridButton(this.searchButtonClass,this.searchButtonTooltip,function(f){f.search()})},_createClearFilterButton:function(){return this._createGridButton(this.clearFilterButtonClass,this.clearFilterButtonTooltip,function(f){f.clearFilter()})},_createInsertButton:function(){return this._createGridButton(this.insertButtonClass,this.insertButtonTooltip,function(f){f.insertItem().done(function(){f.clearInsert()})})},_createUpdateButton:function(){return this._createGridButton(this.updateButtonClass,this.updateButtonTooltip,function(f,g){f.updateItem();g.stopPropagation()})},_createCancelEditButton:function(){return this._createGridButton(this.cancelEditButtonClass,this.cancelEditButtonTooltip,function(f,g){f.cancelEdit();g.stopPropagation()})},_createGridButton:function(f,h,i){var g=this._grid;return c("<span>").addClass(this.buttonClass).addClass(f).attr({type:"button",title:h}).on("click",function(j){i(g,j)})},editValue:function(){return""}});b.fields.control=b.ControlField=e}(jsGrid,jQuery));