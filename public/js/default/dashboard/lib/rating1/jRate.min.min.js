!function(a){a.fn.jRate=function(N){function J(b){return"undefined"!=typeof b}function X(){return J(t)?t.rating:void 0}function O(b){if(!J(b)||b<t.min||b>t.max){throw b+" is not in range("+min+","+max+")"}t.rating=b,Q(b)}function ab(c){var g,d='<svg width="'+t.width+'" height='+t.height+' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',f=t.horizontal,h=ac.attr("id"),b='<defs><linearGradient id="'+h+"_grad"+c+'" x1="0%" y1="0%" x2="'+(f?100:0)+'%" y2="'+(f?0:100)+'%"><stop offset="0%"  stop-color='+t.backgroundColor+'/><stop offset="0%" stop-color='+t.backgroundColor+"/></linearGradient></defs>";switch(t.shape){case"STAR":g=d+'viewBox="0 12.705 512 486.59">'+b+'<polygon style="fill: url(#'+h+"_grad"+c+");stroke:"+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:2px;" points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/></svg>';break;case"CIRCLE":g=d+">"+b+'<circle  cx="'+t.width/2+'" cy="'+t.height/2+'" r="'+t.width/2+'" fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:2px;"/></svg>';break;case"RECTANGLE":g=d+">"+b+'<rect width="'+t.width+'" height="'+t.height+'" fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:2px;"/></svg>';break;case"TRIANGLE":g=d+">"+b+'<polygon points="'+t.width/2+",0 0,"+t.height+" "+t.width+","+t.height+'" fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:2px;"/></svg>';break;case"RHOMBUS":g=d+">"+b+'<polygon points="'+t.width/2+",0 "+t.width+","+t.height/2+" "+t.width/2+","+t.height+" 0,"+t.height/2+'" fill="url(#'+h+"_grad"+c+')"  style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:2px;"/></svg>';break;case"FOOD":g=d+'viewBox="0 0 50 50">'+b+'<path fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';"d="M45.694,21.194C45.694,9.764,36.43,0.5,25,0.5S4.306,9.764,4.306,21.194c0,8.621,5.272,16.005,12.764,19.115c-1.882,2.244-3.762,4.486-5.645,6.73c-0.429,0.5-0.458,1.602,0.243,2.145c0.7,0.551,1.757,0.252,2.139-0.289c1.878-2.592,3.753-5.189,5.63-7.783c1.774,0.494,3.633,0.777,5.561,0.777c1.85,0,3.64-0.266,5.349-0.723c1.617,2.563,3.238,5.121,4.862,7.684c0.34,0.555,1.365,0.91,2.088,0.414c0.728-0.492,0.759-1.58,0.368-2.096c-1.663-2.252-3.332-4.508-4.995-6.76C40.3,37.354,45.694,29.91,45.694,21.194z M25,37.824c-1.018,0-2.01-0.105-2.977-0.281c1.07-1.48,2.146-2.965,3.215-4.447c0.939,1.48,1.874,2.959,2.81,4.436C27.058,37.717,26.041,37.824,25,37.824z M30.155,37c-1.305-1.764-2.609-3.527-3.91-5.295c0.724-1,1.446-1.998,2.17-3c1.644,0.746,3.646,0,4.827-1.787c1.239-1.872,0.005,0,0.005,0.002c0.01-0.014,5.822-8.824,5.63-8.97c-0.186-0.15-3.804,4.771-6.387,8.081l-0.548-0.43c2.362-3.481,5.941-8.426,5.757-8.575c-0.189-0.146-3.959,4.655-6.652,7.878l-0.545-0.428c2.463-3.398,6.202-8.228,6.014-8.374c-0.188-0.15-4.115,4.528-6.917,7.67l-0.547-0.43c2.575-3.314,6.463-8.02,6.278-8.169c-0.191-0.15-5.808,6.021-7.319,7.651c-1.325,1.424-1.664,3.68-0.562,5.12c-0.703,0.84-1.41,1.678-2.113,2.518c-0.781-1.057-1.563-2.111-2.343-3.17c1.975-1.888,1.984-5.234-0.054-7.626c-2.14-2.565-6.331-5.22-8.51-3.818c-2.093,1.526-1.14,6.396,0.479,9.316c1.498,2.764,4.617,3.965,7.094,2.805c0.778,1.227,1.554,2.455,2.333,3.684c-1.492,1.783-2.984,3.561-4.478,5.342C13.197,34.826,8.38,28.574,8.38,21.191c0-9.183,7.444-16.631,16.632-16.631c9.188,0,16.625,7.447,16.625,16.631C41.63,28.576,36.816,34.828,30.155,37z"/></svg>';break;case"TWITTER":g=d+'viewBox="0 0 512 512">'+b+'<path fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:0.7px;"d="M512,97.209c-18.838,8.354-39.082,14.001-60.33,16.54c21.687-13,38.343-33.585,46.187-58.115c-20.299,12.039-42.778,20.78-66.705,25.49c-19.16-20.415-46.461-33.17-76.674-33.17c-58.011,0-105.043,47.029-105.043,105.039c0,8.233,0.929,16.25,2.72,23.939c-87.3-4.382-164.701-46.2-216.509-109.753c-9.042,15.514-14.223,33.558-14.223,52.809c0,36.444,18.544,68.596,46.73,87.433c-17.219-0.546-33.416-5.271-47.577-13.139c-0.01,0.438-0.01,0.878-0.01,1.321c0,50.894,36.209,93.348,84.261,103c-8.813,2.399-18.094,3.686-27.674,3.686c-6.769,0-13.349-0.66-19.764-1.887c13.368,41.73,52.16,72.104,98.126,72.949c-35.95,28.175-81.243,44.967-130.458,44.967c-8.479,0-16.84-0.497-25.058-1.471c46.486,29.806,101.701,47.197,161.021,47.197c193.211,0,298.868-160.062,298.868-298.872c0-4.554-0.103-9.084-0.305-13.59C480.11,136.773,497.918,118.273,512,97.209z"/></svg>';break;case"BULB":g=d+'viewBox="0 0 512 512">'+b+'<path fill="url(#'+h+"_grad"+c+')" style="stroke:'+t.strokeColor+";fill-opacity:"+ +t.transparency+';stroke-width:0.7px;"d="M384,192c0,64-64,127-64,192H192c0-63-64-128-64-192c0-70.688,57.313-128,128-128S384,121.313,384,192z M304,448h-96c-8.844,0-16,7.156-16,16s7.156,16,16,16h2.938c6.594,18.625,24.188,32,45.063,32s38.469-13.375,45.063-32H304c8.844,0,16-7.156,16-16S312.844,448,304,448z M304,400h-96c-8.844,0-16,7.156-16,16s7.156,16,16,16h96c8.844,0,16-7.156,16-16S312.844,400,304,400z M81.719,109.875l28.719,16.563c4.438-9.813,9.844-19,16.094-27.656L97.719,82.125L81.719,109.875z M272,33.625V0h-32v33.625C245.344,33.063,250.5,32,256,32S266.656,33.063,272,33.625z M190.438,46.438l-16.563-28.719l-27.75,16l16.656,28.813C171.438,56.281,180.625,50.875,190.438,46.438z M430.281,109.875l-16-27.75l-28.813,16.656c6.25,8.656,11.688,17.844,16.125,27.656L430.281,109.875z M365.844,33.719l-27.688-16l-16.563,28.719c9.781,4.438,19,9.844,27.625,16.063L365.844,33.719z M96,192c0-5.5,1.063-10.656,1.625-16H64v32h33.688C97.063,202.688,96,197.438,96,192z M414.375,176c0.563,5.344,1.625,10.5,1.625,16c0,5.438-1.063,10.688-1.688,16H448v-32H414.375z M388.094,286.719l26.188,15.125l16-27.719l-29.063-16.75C397.188,267.313,392.813,277.063,388.094,286.719z M81.719,274.125l16,27.719l25.969-14.969c-4.688-9.688-9.063-19.5-13.031-29.438L81.719,274.125z"/></svg>';break;default:throw Error("No such shape as "+t.shape)}return g}function T(){ac.css("white-space","nowrap"),ac.css("cursor","pointer"),ac.css("fill",t.shape)}function Z(b,c){b.on("mousemove",G(c)).on("mouseenter",G(c)).on("click",P(c)).on("mouseover",G(c)).on("hover",G(c)).on("mouseleave",Y).on("mouseout",Y).on("JRate.change",B).on("JRate.set",S),t.touch&&b.on("touchstart",E(c)).on("touchmove",E(c)).on("touchend",F(c)).on("tap",F(c))}function H(){for(var b=ac.attr("id"),c=0;c<t.count;c++){A.eq(c).find("#"+b+"_grad"+(c+1)).find("stop").eq(0).attr({offset:"0%"}),A.eq(c).find("#"+b+"_grad"+(c+1)).find("stop").eq(0).attr({"stop-color":t.backgroundColor}),A.eq(c).find("#"+b+"_grad"+(c+1)).find("stop").eq(1).attr({offset:"0%"}),A.eq(c).find("#"+b+"_grad"+(c+1)).find("stop").eq(1).attr({"stop-color":t.backgroundColor})}}function Q(f){H();var h=(t.max-t.min)/t.count;f=(f-t.min)/h;var g=t.startColor,l=ac.attr("id");if(t.reverse){for(var b=0;f>b;b++){var d=t.count-1-b;if(A.eq(d).find("#"+l+"_grad"+(d+1)).find("stop").eq(0).attr({offset:"100%"}),A.eq(d).find("#"+l+"_grad"+(d+1)).find("stop").eq(0).attr({"stop-color":g}),parseInt(f)!==f){var k=Math.ceil(t.count-f)-1;A.eq(k).find("#"+l+"_grad"+(k+1)).find("stop").eq(0).attr({offset:100-10*f%10*10+"%"}),A.eq(k).find("#"+l+"_grad"+(k+1)).find("stop").eq(0).attr({"stop-color":t.backgroundColor}),A.eq(k).find("#"+l+"_grad"+(k+1)).find("stop").eq(1).attr({offset:100-10*f%10*10+"%"}),A.eq(k).find("#"+l+"_grad"+(k+1)).find("stop").eq(1).attr({"stop-color":g})}J(K)&&(g=j(t.count-1,b))}}else{for(var b=0;f>b;b++){A.eq(b).find("#"+l+"_grad"+(b+1)).find("stop").eq(0).attr({offset:"100%"}),A.eq(b).find("#"+l+"_grad"+(b+1)).find("stop").eq(0).attr({"stop-color":g}),10*f%10>0&&(A.eq(Math.ceil(f)-1).find("#"+l+"_grad"+(b+1)).find("stop").eq(0).attr({offset:10*f%10*10+"%"}),A.eq(Math.ceil(f)-1).find("#"+l+"_grad"+(b+1)).find("stop").eq(0).attr({"stop-color":g})),J(K)&&(g=j(t.count,b))}}}function W(b){var d,c;return d=document.createElement("canvas"),d.height=1,d.width=1,c=d.getContext("2d"),c.fillStyle=b,c.fillRect(0,0,1,1),c.getImageData(0,0,1,1).data}function Y(){t.readOnly||(Q(t.rating),B(null,{rating:t.rating}))}function U(b){var c=1/t.precision;return Math.round(b*c)/c}function V(f,k,g,h){if(!t.readOnly){var m,b=A.eq(k-1);m=t.horizontal?(f.pageX-b.offset().left)/b.width():(f.pageY-b.offset().top)/b.height();var d=(t.max-t.min)/t.count;m=t.reverse?m:1-m;var l=((t.reverse?t.max-t.min-k+1:k)-m)*d;l=t.min+Number(U(l)),l<t.minSelected&&(l=t.minSelected),l<=t.max&&l>=t.min&&(Q(l),h&&(t.rating=l),b.trigger(g,{rating:l}))}}function L(q,d,b,l){if(!t.readOnly){var g=q.originalEvent.changedTouches;if(!(g.length>1)){var p,h=g[0],m=A.eq(d-1);p=t.horizontal?(h.pageX-m.offset().left)/m.width():(h.pageY-m.offset().top)/m.height();var u=(t.max-t.min)/t.count;p=t.reverse?p:1-p;var k=((t.reverse?t.max-t.min-d+1:d)-p)*u;k=t.min+Number(U(k)),k<t.minSelected&&(k=t.minSelected),k<=t.max&&k>=t.min&&(Q(k),l&&(t.rating=k),m.trigger(b,{rating:k}))}}}function G(b){return function(c){V(c,b,"JRate.change")}}function P(b){return function(c){V(c,b,"JRate.set",!0)}}function E(b){return function(c){L(c,b,"JRate.touch")}}function F(b){return function(c){L(c,b,"JRate.tap",!0)}}function B(b,c){t.onChange&&"function"==typeof t.onChange&&t.onChange.apply(this,[c.rating])}function S(b,c){t.onSet&&"function"==typeof t.onSet&&t.onSet.apply(this,[c.rating])}function I(){var b,f,c,d;for(f=0;f<t.count;f++){ac.append(ab(f+1))}for(A=ac.find("svg"),f=0;f<t.count;f++){b=A.eq(f),Z(b,f+1),t.horizontal?b.css("margin-right",t.shapeGap||"0px"):b.css({display:"block","margin-bottom":t.shapeGap||"0px"}),t.widthGrowth&&(c="scaleX("+(1+t.widthGrowth*f)+")",b.css({transform:c,"-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c})),t.heightGrowth&&(d="scaleY("+(1+t.heightGrowth*f)+")",b.css({transform:d,"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,"-o-transform":d}))}H(),Q(t.rating),A.attr({width:t.width,height:t.height})}var D,K,A,ac=a(this),aa={rating:0,shape:"STAR",count:5,width:"20",height:"20",widthGrowth:0,heightGrowth:0,backgroundColor:"white",startColor:"yellow",endColor:"green",strokeColor:"black",transparency:1,shapeGap:"0px",opacity:1,min:0,max:5,precision:0.1,minSelected:0,horizontal:!0,reverse:!1,readOnly:!1,touch:!0,onChange:null,onSet:null},t=a.extend({},aa,N),j=function(c,g){for(var d=[],f=0;3>f;f++){var h=Math.round((D[f]-K[f])/c),b=D[f]+h*(g+1);d[f]=b/256?(D[f]-h*(g+1))%256:(D[f]+h*(g+1))%256}return"rgba("+d[0]+","+d[1]+","+d[2]+","+t.opacity+")"};return t.startColor&&(D=W(t.startColor)),t.endColor&&(K=W(t.endColor)),T(),I(),a.extend({},this,{getRating:X,setRating:O,setReadOnly:function(b){t.readOnly=b},isReadOnly:function(){return t.readOnly}})}}(jQuery);